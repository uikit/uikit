// Name:            Marquee
// Description:     Component to create scrolling areas
//
// Component:       `uk-marquee`
//
// Sub-objects:     `uk-marquee-items`
//
// Modifiers:       `uk-marquee-vertical`
//                  `uk-marquee-fade`
//
// ========================================================================


// Variables
// ========================================================================


/* ========================================================================
   Component: Marquee
 ========================================================================== */

/*
 * 1. Fallback for Safari 15 and older
 * 2. Clip child elements
 *    `clip` prevents accidental scrolling through elements in slide getting focused
 *    `clip` also works in only one direction
 * 3. Prevent tab highlighting on iOS.
 */

.uk-marquee {
    /* 1 */
    overflow-x: hidden;
    /* 2 */
    overflow-x: clip;
    /* 3 */
    -webkit-tap-highlight-color: transparent;
    .hook-marquee();
}

.uk-marquee-vertical {
    overflow: visible;
    overflow-y: hidden;
    overflow-y: clip;
}

/*
 * Fade out
 */

.uk-marquee-fade {
    --uk-overflow-fade-size: 100px;
    --uk-overflow-fade-direction: right;
}
.uk-marquee-fade.uk-marquee-vertical  { --uk-overflow-fade-direction: bottom; }

.uk-marquee-fade {
    mask-image: linear-gradient(
        to var(--uk-overflow-fade-direction),
        rgba(0, 0, 0, var(--uk-overflow-fade-start-opacity)),
        #000 var(--uk-overflow-fade-size),
        #000 ~'calc(100% - var(--uk-overflow-fade-size))',
        rgba(0, 0, 0, var(--uk-overflow-fade-end-opacity))
    );
}


/* Items
 ========================================================================== */

/*
 * 1. Create a containing block.
 */

.uk-marquee-items {
    /* 1 */
    position: relative;
}

/*
 * 1. Reset list style without interfering with grid
 * 2. Prevent displaying the callout information on iOS.
 */

.uk-marquee:not(.uk-marquee-vertical) .uk-marquee-items:not(.uk-grid) {
    display: flex;
    /* 1 */
    margin: 0;
    padding: 0;
    list-style: none;
    /* 2 */
    -webkit-touch-callout: none;
}

.uk-marquee:not(.uk-marquee-vertical) .uk-marquee-items.uk-grid { flex-wrap: nowrap; }


/* Item
 ========================================================================== */

/*
 * 1. Let items take content dimensions (0 0 auto)
 *    `max-width` needed to keep image responsiveness and prevent content overflow
 * 2. Create position context
 * 3. Create animation along offset-path
 */

.uk-marquee-items > * {
    /* 1 */
    flex: none !important;
    box-sizing: border-box;
    max-width: 100%;
    /* 2 */
    position: relative;
    /* 3 */
    offset-anchor: 0 0;
    offset-rotate: 0deg;
    offset-path: path(var(--uk-marquee-path));
    animation: uk-marquee linear var(--uk-marquee-duration) infinite var(--uk-marquee-direction);
}

@keyframes uk-marquee {
    0% { offset-distance: 0; }
    100% { offset-distance: 100%; }
}


// Hooks
// ========================================================================

.hook-marquee-misc();

.hook-marquee() {}
.hook-marquee-misc() {}
