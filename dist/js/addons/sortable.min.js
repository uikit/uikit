/*! UIkit 2.8.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */

!function(a){var b;jQuery&&jQuery.UIkit&&(b=a(jQuery,jQuery.UIkit)),"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return b||a(jQuery,jQuery.UIkit)})}(function(a,b){"use strict";function c(a,b){var c=a.parentNode;if(b.parentNode!=c)return!1;for(var d=a.previousSibling;d&&9!==d.nodeType;){if(d===b)return!0;d=d.previousSibling}return!1}function d(a,b){var c=b;if(c==a)return null;for(;c;){if(c.parentNode===a)return c;if(c=c.parentNode,!c||!c.ownerDocument||11===c.nodeType)break}return null}function e(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}var f,g,h,i="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,j=!i&&function(){var a=document.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a}();return j=!1,b.component("sortable",{defaults:{warp:!1,animation:150,childClass:"uk-sortable-item",placeholderClass:"uk-sortable-placeholder",overClass:"uk-sortable-over",draggingClass:"uk-sortable-dragged",dragMovingClass:"uk-sortable-moving",dragCustomClass:"",handleClass:!1,stop:function(){},start:function(){},change:function(){}},init:function(){function b(b){return function(c){var e=i&&c.touches&&c.touches[0]||{},f=e.target||c.target;if(i&&document.elementFromPoint&&(f=document.elementFromPoint(c.pageX-document.body.scrollLeft,c.pageY-document.body.scrollTop)),a(f).hasClass(m.options.childClass))b.apply(f,[c]);else if(f!==n){var g=d(n,f);g&&b.apply(g,[c])}}}function c(){j||(i?n.addEventListener("touchmove",w,!1):(n.addEventListener("mouseover",s,!1),n.addEventListener("mouseout",t,!1)),n.addEventListener(i?"touchend":"mouseup",u,!1),document.addEventListener(i?"touchend":"mouseup",v,!1),document.addEventListener("selectstart",e,!1))}function k(){j||(i?n.removeEventListener("touchmove",w,!1):(n.removeEventListener("mouseover",s,!1),n.removeEventListener("mouseout",t,!1)),n.removeEventListener(i?"touchend":"mouseup",u,!1),document.removeEventListener(i?"touchend":"mouseup",v,!1),document.removeEventListener("selectstart",e,!1))}var l,m=this,n=this.element[0],o=null,p=null;j?this.element.children().attr("draggable","true"):this.element.on("mousedown touchstart","a[href]",function(){h=a(this)}).on("click","a[href]",function(b){return h=a(this),b.stopImmediatePropagation(),!1});var q=b(function(b){g=!1;{var d=a(b.target);m.element.children()}if(i||2!=b.button){if(m.options.handleClass){var e=d.hasClass(m.options.handleClass)?d:d.closest("."+m.options.handleClass,n);if(!e.length)return void b.preventDefault()}b.dataTransfer&&(b.dataTransfer.effectAllowed="move",b.dataTransfer.dropEffect="move",b.dataTransfer.setData("Text","*")),o=this,f&&f.remove();var h=a(o),k=h.offset();f=a('<div class="'+[m.options.draggingClass,m.options.dragCustomClass].join(" ")+'"></div>').css({display:"none",top:k.top,left:k.left,width:h.width(),height:h.height(),padding:h.css("padding")}).data("mouse-offset",{left:k.left-parseInt(b.pageX,10),top:k.top-parseInt(b.pageY,10)}).append(h.html()).appendTo("body"),f.$current=h,f.$sortable=m,c(),m.options.start(this,o),m.trigger("sortable-start",[m,o]),j||b.preventDefault()}}),r=b(function(a){return o?(a.preventDefault&&a.preventDefault(),!1):!0}),s=b(a.UIkit.Utils.debounce(function(){if(!o||o===this)return!0;var b=m.dragenterData(this);return m.dragenterData(this,b+1),0===b&&(a(this).addClass(m.options.overClass),m.options.warp||m.moveElementNextTo(o,this)),!1}),40),t=b(function(){var b=m.dragenterData(this);m.dragenterData(this,b-1),m.dragenterData(this)||(a(this).removeClass(m.options.overClass),m.dragenterData(this,!1))}),u=b(function(a){if("drop"===a.type&&(a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()),this!==o){if(m.options.warp){var b=o.nextSibling;this.parentNode.insertBefore(o,this),this.parentNode.insertBefore(this,b)}m.options.change(this,o),m.trigger("sortable-change",[m,o])}}),v=function(){o=null,p=null,m.element.children().each(function(){1===this.nodeType&&(a(this).removeClass(m.options.overClass).removeClass(m.options.placeholderClass).removeClass(m.options.childClass),m.dragenterData(this,!1))}),a("html").removeClass(m.options.dragMovingClass),k(),m.options.stop(this),m.trigger("sortable-stop",[m]),f.remove(),f=null},w=b(function(b){return o&&o!==this&&p!==this?(l.removeClass(m.options.overClass),p=this,m.options.warp?a(this).addClass(m.options.overClass):m.moveElementNextTo(o,this),e(b)):!0});j?(n.addEventListener("dragstart",q,!1),n.addEventListener("dragenter",s,!1),n.addEventListener("dragleave",t,!1),n.addEventListener("drop",u,!1),n.addEventListener("dragover",r,!1),n.addEventListener("dragend",v,!1)):n.addEventListener(i?"touchstart":"mousedown",q,!1)},dragenterData:function(b,c){return b=a(b),1==arguments.length?parseInt(b.attr("data-child-dragenter"),10)||0:void(c?b.attr("data-child-dragenter",Math.max(0,c)):b.removeAttr("data-child-dragenter"))},moveElementNextTo:function(b,d){var e=this,f=a(b).parent().css("min-height",""),g=c(b,d)?d:d.nextSibling,h=f.children(),i=h.length;return e.options.warp||!e.options.animation?(d.parentNode.insertBefore(b,g),void a(document).trigger("uk-check-display")):(f.css("min-height",f.height()),h.stop().each(function(){var b=a(this),c=b.position();c.width=b.width(),b.data("offset-before",c)}),d.parentNode.insertBefore(b,g),h=f.children().each(function(){var b=a(this);b.data("offset-after",b.position())}).each(function(){var b=a(this),c=b.data("offset-before");b.css({position:"absolute",top:c.top,left:c.left,"min-width":c.width})}),void h.each(function(){var b=a(this),c=(b.data("offset-before"),b.data("offset-after"));b.css("pointer-events","none").width(),setTimeout(function(){b.animate({top:c.top,left:c.left},e.options.animation,function(){b.css({position:"",top:"",left:"","min-width":"","pointer-events":""}).removeClass(e.options.overClass).attr("data-child-dragenter",""),i--,i||(f.css("min-height",""),a(document).trigger("uk-check-display"))})},0)}))}}),a(document).on("uk-domready",function(){a("[data-uk-sortable]").each(function(){var c=a(this);if(!c.data("sortable")){b.sortable(c,b.Utils.options(c.attr("data-uk-sortable")))}})}),a(document).on("mousemove touchmove",function(b){if(f){g||(g=!0,f.show(),f.$current.addClass(f.$sortable.options.placeholderClass),f.$sortable.element.children().addClass(f.$sortable.options.childClass),a("html").addClass(f.$sortable.options.dragMovingClass));var c=f.data("mouse-offset"),d=parseInt(b.originalEvent.pageX,10)+c.left,e=parseInt(b.originalEvent.pageY,10)+c.top;f.css({left:d,top:e})}}),a(document).on("mouseup touchend",function(){!g&&h&&(location.href=h.attr("href")),h=!1}),b.sortable});