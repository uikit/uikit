/*! UIkit 2.20.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
!function(e){var t;window.UIkit&&(t=e(UIkit)),"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return t||e(UIkit)})}(function(e){"use strict";function t(e,t){var n=e.parentNode;if(t.parentNode!=n)return!1;for(var o=e.previousSibling;o&&9!==o.nodeType;){if(o===t)return!0;o=o.previousSibling}return!1}function n(e,t){var n=t;if(n==e)return null;for(;n;){if(n.parentNode===e)return n;if(n=n.parentNode,!n||!n.ownerDocument||11===n.nodeType)break}return null}function o(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}var a,s,r,i,l,d="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,u=!d&&function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}();return u=!1,e.component("sortable",{defaults:{warp:!1,animation:150,threshold:10,childClass:"uk-sortable-item",placeholderClass:"uk-sortable-placeholder",overClass:"uk-sortable-over",draggingClass:"uk-sortable-dragged",dragMovingClass:"uk-sortable-moving",dragCustomClass:"",handleClass:!1,stop:function(){},start:function(){},change:function(){}},boot:function(){e.ready(function(t){e.$("[data-uk-sortable]",t).each(function(){var t=e.$(this);if(!t.data("sortable")){e.sortable(t,e.Utils.options(t.attr("data-uk-sortable")))}})}),e.$html.on("mousemove touchmove",function(t){if(l){var n=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0]:t;(Math.abs(n.pageX-l.pos.x)>l.threshold||Math.abs(n.pageY-l.pos.y)>l.threshold)&&l.apply()}if(a){s||(s=!0,a.show(),a.$current.addClass(a.$sortable.options.placeholderClass),a.$sortable.element.children().addClass(a.$sortable.options.childClass),e.$html.addClass(a.$sortable.options.dragMovingClass));var o=a.data("mouse-offset"),r=parseInt(t.originalEvent.pageX,10)+o.left,i=parseInt(t.originalEvent.pageY,10)+o.top;a.css({left:r,top:i}),i<e.$win.scrollTop()?e.$win.scrollTop(e.$win.scrollTop()-Math.ceil(a.height()/2)):i+a.height()>window.innerHeight+e.$win.scrollTop()&&e.$win.scrollTop(e.$win.scrollTop()+Math.ceil(a.height()/2))}}),e.$html.on("mouseup touchend",function(){!s&&i&&(location.href=i.attr("href")),l=i=!1})},init:function(){function t(t){return function(o){var a=d&&o.touches&&o.touches[0]||{},s=a.target||o.target;if(d&&document.elementFromPoint&&(s=document.elementFromPoint(o.pageX-document.body.scrollLeft,o.pageY-document.body.scrollTop)),e.$(s).hasClass(c.options.childClass))t.apply(s,[o]);else if(s!==f){var r=n(f,s);r&&t.apply(r,[o])}}}function h(){u||(d?f.addEventListener("touchmove",y,!1):(f.addEventListener("mouseover",C,!1),f.addEventListener("mouseout",$,!1)),f.addEventListener(d?"touchend":"mouseup",w,!1),document.addEventListener(d?"touchend":"mouseup",E,!1),document.addEventListener("selectstart",o,!1))}function p(){u||(d?f.removeEventListener("touchmove",y,!1):(f.removeEventListener("mouseover",C,!1),f.removeEventListener("mouseout",$,!1)),f.removeEventListener(d?"touchend":"mouseup",w,!1),document.removeEventListener(d?"touchend":"mouseup",E,!1),document.removeEventListener("selectstart",o,!1))}var c=this,f=this.element[0],v=null,m=null;u?this.element.children().attr("draggable","true"):this.element.on("mousedown touchstart","a[href]",function(t){t.ctrlKey||t.metaKey||t.shiftKey||(i=e.$(this),t.preventDefault())}).on("click","a[href]",function(t){return t.ctrlKey||t.metaKey||t.shiftKey?void 0:(i=e.$(this),t.stopImmediatePropagation(),!1)});var g=t(function(t){s=!1,r=!1;{var n=e.$(t.target);c.element.children()}if(d||2!=t.button){if(c.options.handleClass){var o=n.hasClass(c.options.handleClass)?n:n.closest("."+c.options.handleClass,f);if(!o.length)return}if(!n.is(":input")){t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move",t.dataTransfer.setData("Text","*")),v=this,a&&a.remove();var i=e.$(v),p=i.offset();l={pos:{x:t.pageX,y:t.pageY},threshold:c.options.threshold,apply:function(){a=e.$('<div class="'+[c.options.draggingClass,c.options.dragCustomClass].join(" ")+'"></div>').css({display:"none",top:p.top,left:p.left,width:i.width(),height:i.height(),padding:i.css("padding")}).data("mouse-offset",{left:p.left-parseInt(t.pageX,10),top:p.top-parseInt(t.pageY,10)}).append(i.html()).appendTo("body"),a.$current=i,a.$sortable=c,h(),c.options.start(this,v),c.trigger("start.uk.sortable",[c,v]),l=!1}},u||t.preventDefault()}}}),b=t(function(e){return v?(e.preventDefault&&e.preventDefault(),!1):!0}),C=t(e.Utils.debounce(function(){if(!v||v===this)return!0;var t=c.dragenterData(this);return c.dragenterData(this,t+1),0===t&&(e.$(this).addClass(c.options.overClass),c.options.warp||c.moveElementNextTo(v,this)),!1}),40),$=t(function(){var t=c.dragenterData(this);c.dragenterData(this,t-1),c.dragenterData(this)||(e.$(this).removeClass(c.options.overClass),c.dragenterData(this,!1))}),w=t(function(t){if("drop"===t.type&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()),r||c.options.warp){if(c.options.warp){var n=v.nextSibling;this.parentNode.insertBefore(v,this),this.parentNode.insertBefore(this,n),e.Utils.checkDisplay(c.element.parent())}c.options.change(this,v),c.trigger("change.uk.sortable",[c,v])}}),E=function(){v=null,m=null,c.element.children().each(function(){1===this.nodeType&&(e.$(this).removeClass(c.options.overClass).removeClass(c.options.placeholderClass).removeClass(c.options.childClass),c.dragenterData(this,!1))}),e.$("html").removeClass(c.options.dragMovingClass),p(),c.options.stop(this),c.trigger("stop.uk.sortable",[c]),a.remove(),a=null},y=t(function(t){return v&&v!==this&&m!==this?(c.element.children().removeClass(c.options.overClass),m=this,c.options.warp?e.$(this).addClass(c.options.overClass):c.moveElementNextTo(v,this),o(t)):!0});u?(f.addEventListener("dragstart",g,!1),f.addEventListener("dragenter",C,!1),f.addEventListener("dragleave",$,!1),f.addEventListener("drop",w,!1),f.addEventListener("dragover",b,!1),f.addEventListener("dragend",E,!1)):f.addEventListener(d?"touchstart":"mousedown",g,!1)},dragenterData:function(t,n){return t=e.$(t),1==arguments.length?parseInt(t.attr("data-child-dragenter"),10)||0:(n?t.attr("data-child-dragenter",Math.max(0,n)):t.removeAttr("data-child-dragenter"),void 0)},moveElementNextTo:function(n,o){r=!0;var a=this,s=e.$(n).parent().css("min-height",""),i=t(n,o)?o:o.nextSibling,l=s.children(),d=l.length;return a.options.warp||!a.options.animation?(o.parentNode.insertBefore(n,i),e.Utils.checkDisplay(a.element.parent()),void 0):(s.css("min-height",s.height()),l.stop().each(function(){var t=e.$(this),n=t.position();n.width=t.width(),t.data("offset-before",n)}),o.parentNode.insertBefore(n,i),e.Utils.checkDisplay(a.element.parent()),l=s.children().each(function(){var t=e.$(this);t.data("offset-after",t.position())}).each(function(){var t=e.$(this),n=t.data("offset-before");t.css({position:"absolute",top:n.top,left:n.left,"min-width":n.width})}),l.each(function(){var t=e.$(this),n=(t.data("offset-before"),t.data("offset-after"));t.css("pointer-events","none").width(),setTimeout(function(){t.animate({top:n.top,left:n.left},a.options.animation,function(){t.css({position:"",top:"",left:"","min-width":"","pointer-events":""}).removeClass(a.options.overClass).attr("data-child-dragenter",""),d--,d||(s.css("min-height",""),e.Utils.checkDisplay(a.element.parent()))})},0)}),void 0)},serialize:function(){var t,n,o=[];return this.element.children().each(function(a,s){t={};for(var r=0;r<s.attributes.length;r++)n=s.attributes[r],0===n.name.indexOf("data-")&&(t[n.name.substr(5)]=e.Utils.str2json(n.value));o.push(t)}),o}}),e.sortable});